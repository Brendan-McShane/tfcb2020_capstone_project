---
title: "TFCB2020 Capstone Project"
author: "BrendanMcShane"
date: "12/13/2020"
output: html_document
---

Question 2: Which continuous variables are most correlated with each other? Does this change after sub-setting into disease states?

```{r, echo = FALSE, warning = FALSE, message=FALSE}
library(tidyverse)
#I found the library below containing convenient functions to both calculate and plot correlations
library(corrplot)
library(knitr)
```

```{r}


df <- read.csv(file = 'data/ds_whole.csv')
df_cont <- df[, c(3,5,6,8,9)]


df_cont_corr <- cor(df_cont) %>%
  as.table()

knitr::kable(df_cont_corr)

```

```{r}
corrplot(df_cont_corr, 
         method = "square", 
         type = "lower", 
         diag = FALSE, 
         tl.pos = "ld", 
         tl.col = "black")
```

The correlations between these continuous variables show that RNFL4.mean and mean_deviation are the most well correlated, with a Pearson correlation coefficient of ~0.679. I'll now repeat these analyses on the data subsetted by disease state.

First I'll do the non-glaucoma observations:
```{r}
df_healthy_cont <- df[which(df$glaucoma == 0), c(3,5,6,8,9)]
df_healthy_cont_corr <- cor(df_healthy_cont) %>% as.table()

kable(df_healthy_cont_corr)


```
```{r}
corrplot(df_healthy_cont_corr, 
         method = "square", 
         type = "lower", 
         diag = FALSE, 
         tl.pos = "ld", 
         tl.col = "black")
```


In the healthy samples, mean deviation and pattern standard deviation are now the strongest correlation, being an anti-correlation with a value of -0.57

```{r}
df_disease_cont <- df[which(df$glaucoma == 1), c(3,5,6,8,9)]
df_disease_cont_corr <- cor(df_disease_cont) %>% as.table()

kable(df_disease_cont_corr)

```

```{r}
corrplot(df_disease_cont_corr, 
         method = "square", 
         type = "lower", 
         diag = FALSE, 
         tl.pos = "ld", 
         tl.col = "black")
```


In the disease state, mean_deviation and RNFL mean maintain the highest correlation coefficient, although the strength of the correlation weakens slightly having a value of only 0.56.

